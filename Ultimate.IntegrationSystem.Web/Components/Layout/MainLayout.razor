@using MudBlazor
@using Microsoft.Extensions.Localization
@using System.Globalization
@inject IStringLocalizer<SharedResources> L
@inherits LayoutComponentBase

<MudLayout>

  <!-- القائمة الجانبية القابلة للطيّ -->
  @code { bool _drawerOpen = true; }
  <MudDrawer @bind-Open="_drawerOpen"
             Variant="DrawerVariant.Persistent"
             MiniVariantWidth="56"
             Elevation="1"
             ClipMode="DrawerClipMode.Never">
    <NavMenu />
  </MudDrawer>

  <!-- المحتوى الرئيسي -->
  <MudMainContent Dir="@Direction">
    <MudAppBar Elevation="1" Color="Color.Primary">
      <MudIconButton Icon="@Icons.Material.Filled.Menu"
                     Color="Color.Inherit"
                     Edge="Edge.Start"
                     OnClick="() => _drawerOpen = !_drawerOpen" />
      <MudText Typo="Typo.h6">@L["AppTitle"]</MudText>
      <MudSpacer />

      <!-- عنوان المستخدم وإجراءاته -->
      <MudText Class="mx-2">@UserEmail</MudText>
      <MudIconButton Icon="@Icons.Material.Filled.HelpOutline" Color="Color.Inherit" />
      <MudIconButton Icon="@Icons.Material.Filled.Notifications" Color="Color.Inherit" />
      <MudAvatar Size="Size.Medium" Class="ml-2">J</MudAvatar>
    </MudAppBar>

    <div class="p-4">
      @Body
    </div>
  </MudMainContent>

</MudLayout>

@code {
  private string UserEmail => "m.yousry@jisr.net";
  private string Direction =>
    CultureInfo.CurrentUICulture.TextInfo.IsRightToLeft ? "rtl" : "ltr";
}
