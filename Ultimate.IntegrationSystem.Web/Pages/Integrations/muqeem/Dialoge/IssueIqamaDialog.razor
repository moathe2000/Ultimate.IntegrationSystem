@using MudBlazor

<MudDialog Class="side-sheet">
    <DialogContent>
        <MudForm @ref="_form">
            <MudStack Spacing="2">

                <!-- Header صغير داخل الديالوج -->
                <MudStack Direction="Row" AlignItems="AlignItems.Center" Justify="Justify.SpaceBetween" Class="sheet-header">
                    <MudStack Direction="Row" AlignItems="AlignItems.Center" Spacing="2">
                        <MudAvatar Size="Size.Medium" Color="Color.Primary">@GetInitials(Employee?.FullName)</MudAvatar>
                        <div>
                            <MudText Typo="Typo.subtitle2">@Employee?.FullName</MudText>
                            <MudText Typo="Typo.caption" Color="Color.Secondary">رقم الموظف: @Employee?.EmployeeNumber</MudText>
                        </div>
                    </MudStack>
                    <MudIconButton Icon="@Icons.Material.Filled.Close" OnClick="Cancel" />
                </MudStack>

                <MudDivider Class="my-2" />
                <MudText Typo="Typo.overline">بيانات الإقامة</MudText>

                <!-- شبكة الحقول -->
                <MudGrid RightToLeft="RightToLeft.Yes" GutterSize="GutterSize.Small">

                    <MudItem xs="12" md="6">
                        <MudSelect T="string" Label="مدة الإقامة (شهر)" @bind-Value="Model.IqamaDuration" Dense="true" Required="true">
                            <MudSelectItem T="string" Value="@("12")">12</MudSelectItem>
    <MudSelectItem T="string" Value="@("24")">24</MudSelectItem>
                        </MudSelect>
                    </MudItem>

                    <MudItem xs="12" md="6">
                        <MudTextField T="string" Label="رقم الحدود"
                                      @bind-Value="Model.BorderNumber" Dense="true" Required="true"
                                      Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.QrCode2"
                                      HelperText="يبدأ بـ 3 أو 4 أو 5 ويتكون من 10 أرقام" />
                    </MudItem>

                    <MudItem xs="12" md="6">
                        <MudTextField T="string" Label="رمز دولة الميلاد"
                                      @bind-Value="Model.LkBirthCountry" Dense="true" Required="true"
                                      Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.Public" />
                    </MudItem>

                    <MudItem xs="12" md="6">
                        <MudTextField T="string" Label="الحالة الاجتماعية (رمز)"
                                      @bind-Value="Model.MaritalStatus" Dense="true" Required="true"
                                      Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.FavoriteBorder" />
                    </MudItem>

                    <MudItem xs="12" md="6">
                        <MudTextField T="string" Label="مدينة إصدار الجواز"
                                      @bind-Value="Model.PassportIssueCity" Dense="true" Required="true"
                                      Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.LocationCity" />
                    </MudItem>
                </MudGrid>

                <MudDivider Class="my-2" />
                <MudText Typo="Typo.overline">الاسم بالإنجليزية</MudText>

                <MudGrid RightToLeft="RightToLeft.Yes" GutterSize="GutterSize.Small">
                    <MudItem xs="12" md="6">
                        <MudTextField T="string" Label="First Name (EN)" @bind-Value="Model.TrFirstName" Dense="true" Required="true" />
                    </MudItem>
                    <MudItem xs="12" md="6">
                        <MudTextField T="string" Label="Father Name (EN)" @bind-Value="Model.TrFatherName" Dense="true" Required="true" />
                    </MudItem>
                    <MudItem xs="12" md="6">
                        <MudTextField T="string" Label="Grand Father Name (EN)" @bind-Value="Model.TrGrandFatherName" Dense="true" Required="true" />
                    </MudItem>
                    <MudItem xs="12" md="6">
                        <MudTextField T="string" Label="Family Name (EN)" @bind-Value="Model.TrFamilyName" Dense="true" Required="true" />
                    </MudItem>
                </MudGrid>

                <!-- Actions (تلتصق أسفل اللوح على الشاشات الطويلة) -->
                <MudStack Direction="Row" Justify="Justify.FlexEnd" Spacing="1" Class="sheet-actions">
                    <MudButton Variant="Variant.Outlined" Color="Color.Default" OnClick="Cancel">إلغاء</MudButton>
                    <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="Save" StartIcon="@Icons.Material.Filled.Save">حفظ</MudButton>
                </MudStack>
            </MudStack>
        </MudForm>
    </DialogContent>
</MudDialog>
